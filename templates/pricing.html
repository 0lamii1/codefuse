{% extends 'base.html' %}

{% block content %}
<style>
    .tab-content {
        display: none;
    }
    .tab-content.active {
        display: block;
    }
    .country-btn.active {
        background: var(--primary-gradient);
        color: white;
        box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
    }
    .service-btn.active {
        background: var(--primary-gradient);
        color: white;
        box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
    }
    .number-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
        border-color: #3a84f3;
    }
    .tab-btn.active {
        background: white;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        color: #1a1a1a;
    }
    .status-badge.active {
        background: #dcfce7;
        color: #16a34a;
    }
    .status-badge.pending {
        background: #fef3c7;
        color: #d97706;
    }
    .status-badge.completed {
        background: #f3f4f6;
        color: #6b7280;
    }
</style>

<div class="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 pt-20">
    <div class="max-w-7xl mx-auto my-8 px-6 pb-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Sidebar -->
            <div class="lg:col-span-1 space-y-6">
                <!-- Country Selection -->
                <div class="glass-surface rounded-2xl p-6">
                    <div class="flex items-center space-x-3 mb-6">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
                        </svg>
                        <h3 class="font-bold text-lg">Select Country</h3>
                    </div>
                    <div class="space-y-3">
                        <button class="country-btn active w-full p-4 rounded-xl border border-gray-200 hover:bg-white/50 transition-all duration-300 text-left" data-country="US" onclick="selectCountry('US')">
                            <div class="flex items-center space-x-3">
                                <div>
                                    <div class="font-semibold">United States</div>
                                </div>
                            </div>
                        </button>
                        
                        <button class="country-btn w-full p-4 rounded-xl border border-gray-200 hover:bg-white/50 transition-all duration-300 text-left" data-country="DE" onclick="selectCountry('DE')">
                            <div class="flex items-center space-x-3">
                                <div>
                                    <div class="font-semibold">Germany</div>
                                </div>
                            </div>
                        </button>
                        <button class="country-btn w-full p-4 rounded-xl border border-gray-200 hover:bg-white/50 transition-all duration-300 text-left" data-country="OTHER" onclick="selectCountry('OTHER')">
                            <div class="flex items-center space-x-3">
                                <div>
                                    <div class="font-semibold">Other Countries</div>
                                </div>
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="lg:col-span-3 space-y-6">
                <!-- Tab Navigation -->
                <div class="glass-surface rounded-2xl p-6">
                    <div class="flex space-x-2 bg-gray-100 rounded-2xl p-2">
                        <button class="tab-btn active flex-1 py-3 px-6 rounded-xl transition-all duration-300 flex items-center justify-center space-x-2" onclick="switchTab('browse')">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>
                            <span>Browse Numbers</span>
                        </button>
                        <button class="tab-btn flex-1 py-3 px-6 rounded-xl transition-all duration-300 flex items-center justify-center space-x-2" onclick="switchTab('results')">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
                            </svg>
                            <span>My Numbers</span>
                        </button>
                    </div>
                </div>
                    <div id="us-content" class="tab-content">
            <!-- US Filters -->
            <div class="glass-surface rounded-2xl p-8 mb-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
                    <svg class="w-5 h-5 mr-3 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"/>
                    </svg>
                    Filter US Numbers
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Service Name</label>
                        <input 
                            type="text" 
                            id="us-service-name"
                            placeholder="Search service name..."
                            class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white/80 backdrop-blur-sm"
                        >
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Min Cost (₦)</label>
                        <input 
                            type="number" 
                            id="us-min-cost"
                            placeholder="0"
                            min="0"
                            class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white/80 backdrop-blur-sm"
                        >
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Max Cost (₦)</label>
                        <input 
                            type="number" 
                            id="us-max-cost"
                            placeholder="1000"
                            min="0"
                            class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white/80 backdrop-blur-sm"
                        >
                    </div>
                </div>
                <div class="flex justify-between mt-6">
                    <button 
                        id="clear-us-filters"
                        class="px-6 py-3 text-gray-600 font-medium rounded-xl hover:bg-gray-100 transition-all"
                    >
                        Clear Filters
                    </button>
                    <button 
                        id="apply-us-filters"
                        class="premium-button"
                    >
                        Apply Filters
                    </button>
                </div>
            </div>
            <div id="us-numbers-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="text-center py-12">
                    <svg class="animate-spin h-8 w-8 text-blue-500 mx-auto mb-4" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="text-gray-600">Loading US numbers...</p>
                </div>
            </div>
            <div id="us-pagination" class="flex items-center justify-between mt-6 hidden">
                <button id="us-pagination-prev" class="premium-button px-4 py-2" disabled>Previous</button>
                <span id="us-page-info" class="text-gray-600 text-sm">Page 1 of 1</span>
                <button id="us-pagination-next" class="premium-button px-4 py-2" disabled>Next</button>
            </div>
        </div>


                <!-- Browse Tab Content -->
                <div id="browse-tab" class="tab-content active">
                    <div class="glass-surface rounded-2xl p-8">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold mb-2">Available Numbers</h2>
                            <p class="text-gray-600">Showing <span id="browse-service">WhatsApp</span> numbers in <span id="browse-country">United States</span></p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="numbers-grid">
                            <!-- Numbers will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Results Tab Content -->
                <div id="results-tab" class="tab-content">
                    <div class="glass-surface rounded-2xl p-8">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold mb-2">My Rented Numbers</h2>
                            <p class="text-gray-600">Your active and recent number rentals</p>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-200">
                                        <th class="text-left py-4 px-2 font-semibold">Number</th>
                                        <th class="text-left py-4 px-2 font-semibold">Country</th>
                                        <th class="text-left py-4 px-2 font-semibold">Service</th>
                                        <th class="text-left py-4 px-2 font-semibold">Status</th>
                                        <th class="text-left py-4 px-2 font-semibold">Price</th>
                                        <th class="text-left py-4 px-2 font-semibold">Expires</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b border-gray-100 hover:bg-gray-50/50">
                                        <td class="py-4 px-2 font-mono font-semibold">+1-555-0123</td>
                                        <td class="py-4 px-2">US</td>
                                        <td class="py-4 px-2">WhatsApp</td>
                                        <td class="py-4 px-2">
                                            <span class="status-badge active px-3 py-1 rounded-lg text-sm font-medium">Active</span>
                                        </td>
                                        <td class="py-4 px-2 font-semibold">$0.50</td>
                                        <td class="py-4 px-2 text-gray-600">2 hours</td>
                                    </tr>
                                    <tr class="border-b border-gray-100 hover:bg-gray-50/50">
                                        <td class="py-4 px-2 font-mono font-semibold">+49-30-12345</td>
                                        <td class="py-4 px-2">DE</td>
                                        <td class="py-4 px-2">Facebook</td>
                                        <td class="py-4 px-2">
                                            <span class="status-badge pending px-3 py-1 rounded-lg text-sm font-medium">Pending</span>
                                        </td>
                                        <td class="py-4 px-2 font-semibold">$0.45</td>
                                        <td class="py-4 px-2 text-gray-600">1.5 hours</td>
                                    </tr>
                                    <tr class="border-b border-gray-100 hover:bg-gray-50/50">
                                        <td class="py-4 px-2 font-mono font-semibold">+1-555-0456</td>
                                        <td class="py-4 px-2">US</td>
                                        <td class="py-4 px-2">Instagram</td>
                                        <td class="py-4 px-2">
                                            <span class="status-badge active px-3 py-1 rounded-lg text-sm font-medium">Active</span>
                                        </td>
                                        <td class="py-4 px-2 font-semibold">$0.50</td>
                                        <td class="py-4 px-2 text-gray-600">3 hours</td>
                                    </tr>
                                    <tr class="border-b border-gray-100 hover:bg-gray-50/50">
                                        <td class="py-4 px-2 font-mono font-semibold">+44-20-7946</td>
                                        <td class="py-4 px-2">GB</td>
                                        <td class="py-4 px-2">Telegram</td>
                                        <td class="py-4 px-2">
                                            <span class="status-badge completed px-3 py-1 rounded-lg text-sm font-medium">Completed</span>
                                        </td>
                                        <td class="py-4 px-2 font-semibold">$0.55</td>
                                        <td class="py-4 px-2 text-gray-600">Expired</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Country and service data
    const countries = {
        'US': { name: 'United States', flag: '🇺🇸', stock: 1247, price: '$0.50', code: '1' },
        'DE': { name: 'Germany', flag: '🇩🇪', stock: 892, price: '$0.45', code: '49' },
        'GB': { name: 'United Kingdom', flag: '🇬🇧', stock: 654, price: '$0.55', code: '44' },
        'OTHER': { name: 'Other Countries', flag: '🌍', stock: 2156, price: 'Various', code: '1' }
    };
    
    const services = {
        'whatsapp': { name: 'WhatsApp', available: 2156 },
        'facebook': { name: 'Facebook', available: 1834 },
        'instagram': { name: 'Instagram', available: 1672 },
        'telegram': { name: 'Telegram', available: 1245 },
        'other': { name: 'Other Services', available: 543 }
    };
    
    let selectedCountry = 'US';
    let selectedService = 'whatsapp';
    
    function selectCountry(country) {
        selectedCountry = country;
        
        // Update UI
        document.querySelectorAll('.country-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        document.querySelector(`[data-country="${country}"]`).classList.add('active');
        
        // Update selection display
        const countryData = countries[country];
        document.getElementById('selected-flag').textContent = countryData.flag;
        document.getElementById('selected-country').textContent = countryData.name;
        document.getElementById('selected-stock').textContent = countryData.stock.toLocaleString();
        document.getElementById('selected-price').textContent = countryData.price;
        document.getElementById('browse-country').textContent = countryData.name;
        
        // Update available numbers
        updateNumbersGrid();
    }
    
    function selectService(service) {
        selectedService = service;
        
        // Update UI
        document.querySelectorAll('.service-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        document.querySelector(`[data-service="${service}"]`).classList.add('active');
        
        // Update selection display
        const serviceData = services[service];
        document.getElementById('selected-service').textContent = serviceData.name;
        document.getElementById('browse-service').textContent = serviceData.name;
        
        // Update available numbers
        updateNumbersGrid();
    }
    
    function updateNumbersGrid() {
        const grid = document.getElementById('numbers-grid');
        const countryData = countries[selectedCountry];
        const serviceData = services[selectedService];
        
        let html = '';
        for (let i = 0; i < 6; i++) {
            const number = `+${countryData.code}-555-${String(1000 + i).padStart(4, '0')}`;
            html += `
                <div class="number-card p-6 border border-gray-200 rounded-2xl transition-all duration-300 cursor-pointer group">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="font-mono text-lg font-bold text-gray-900">${number}</div>
                            <div class="text-gray-600">${countryData.name} • ${serviceData.name}</div>
                        </div>
                        <div class="text-right">
                            <div class="text-xl font-bold premium-text">${countryData.price}</div>
                            <button class="premium-button mt-3 opacity-0 group-hover:opacity-100 transition-opacity text-sm py-2 px-4" onclick="rentSpecificNumber('${number}')">
                                Rent Now
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }
        grid.innerHTML = html;
    }
    
    function switchTab(tab) {
        // Update tab buttons
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        event.target.closest('.tab-btn').classList.add('active');
        
        // Update tab content
        document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.remove('active');
        });
        document.getElementById(tab + '-tab').classList.add('active');
    }
    
    function rentNumber() {
        const countryData = countries[selectedCountry];
        const serviceData = services[selectedService];
        alert(`Renting ${serviceData.name} number in ${countryData.name} for ${countryData.price}`);
    }
    
    function rentSpecificNumber(number) {
        const countryData = countries[selectedCountry];
        const serviceData = services[selectedService];
        alert(`Renting number ${number} for ${serviceData.name} service at ${countryData.price}`);
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        updateNumbersGrid();
    });
</script>
{% endblock %}